# SearchEngine — пайплайн поиска с SQL-генерацией

Модуль реализует высокоуровневый поисковый пайплайн, который:
1. Преобразует пользовательский запрос в SQL-запрос.
2. Выполняет запрос в базе данных.
3. Форматирует результат в удобный для пользователя текст (Markdown-like).

## Особенности

- **Гибкая архитектура** — принимает внешние компоненты:
  - `sql_generator` — генератор SQL-запросов (LLM).
  - `composer` — отвечает за превращение данных в человекочитаемый ответ.
  - `database` — экземпляр класса, работающего с БД.
- **Логирование** всех шагов для отладки.
- **Обработка ошибок** — возвращает структурированные ответы `status: success|failed`.
- **Валидация пользователя** — поиск `user_id` и `department_id` перед генерацией SQL.
## Блок-схема пайплайна


Каждый блок — это функция класса `SearchEngine`:  
```python
validate_user(self, company, userinfo) # проверяет пользователя, дополняет `system_promt` контекстом. 
```
```python
request2sql(self, request, userinfo) # генерирует SQL-запрос из текста пользователя.
```
```python
sql2data(self, query) # выполняет запрос в базе и возвращает данные.
```
```python
request_and_data2response(self, request, data) # превращает данные в человекочитаемый Markdown-ответ.
```

## **[На главную](../../../README.md)** 
